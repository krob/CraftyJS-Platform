<!DOCTYPE html>

<html>
<head>
	<meta charset="utf-8" />
	
	<title>Simple 2D Platform Jumping</title>
	<script type="text/javascript" src="../crafty.js"></script>
</head>
<body>
	<script type="text/javascript">
		
		window.onload = function()
		{
			Crafty.init(400, 400);
				
			Crafty.e( "LeftWall, Wall, 2D, DOM, Color" )
				.color( '#000000' )
				.attr( 
					{ 
						x:0, 
						y:0, 
						w:2, 
						h:400 
					} 
				);
				
			Crafty.e( "RightWall, Wall, 2D, DOM, Color" )
				.color( '#000000' )
				.attr( 
					{ 
						x:398, 
						y:0, 
						w:2, 
						h:400 
					} 
				);
				
			Crafty.e( "Bottom, 2D, DOM, Color" )
				.color( '#dcdcdc' )
				.attr( 
					{ 
						x:2, 
						y:399, 
						w:396, 
						h:1,
						z:100 
					} 
				);
				
			Crafty.e( "Platform, 2D, DOM, Color" )
				.color( "#000000" )
				.attr(
					{
						x:2,
						y:350,
						w:200,
						h:2
					}
				);
				
			Crafty.e( "Platform, 2D, DOM, Color" )
				.color( "#000000" )
				.attr(
					{
						x:222,
						y:330,
						w:196,
						h:2
					}
				);
				
			Crafty.e( "Player, 2D, DOM, Color, Twoway, Collision, Gravity" )
				.color( '#7f7f7f' )
				.attr( 
					{ 
						x:20, 
						y:20, 
						w:20, 
						h:20 
					}
				)
				.gravity( "Platform" )
				.twoway( 1, 4 )
				.onHit( 
					"Bottom",
					function()
					{
						this.destroy();
					} 
				) 
				.bind( 
					"Moved", 
					function( from )
					{
				
						if( this.hit( "Platform" ) || this.hit( "Wall" ) )
						{
							this.attr( { x:from.x, y:from.y } );
						}
					}
				);
		};
		
	</script>
</body>
</html>

